@{
    var contrato = (inmobiliaria.Models.Contrato)ViewBag.Contrato;
    var pagos = (List<inmobiliaria.Models.Pago>)ViewBag.Pagos;
    ViewData["Title"] = "Detalle de Contrato";
}

<div class="container py-5">
    <div class="row justify-content-center">
        <!-- Detalles del contrato -->
        <div class="col-md-5 mb-4">
            <div class="card h-100">
                <div class="card-body">
                    <h3 class="card-title text-center text-info mb-4">Detalles del Contrato</h3>
                    <ul class="list-group list-group-flush mb-3">
                        <li class="list-group-item bg-transparent">
                            <strong>Inquilino:</strong> @contrato.Nombre_Inquilino @contrato.Apellido_Inquilino
                        </li>
                        <li class="list-group-item bg-transparent">
                            <strong>Monto mensual:</strong> $@contrato.Monto_Mensual
                        </li>
                        <li class="list-group-item bg-transparent">
                            <strong>Fecha inicio:</strong> @contrato.Fecha_Inicio.ToString("dd/MM/yyyy")
                        </li>
                        <li class="list-group-item bg-transparent">
                            <strong>Fecha fin:</strong> @contrato.Fecha_Fin_Original.ToString("dd/MM/yyyy")
                        </li>
                        <li class="list-group-item bg-transparent">
                            <strong>Estado:</strong> @contrato.Estado
                        </li>
                        <li class="list-group-item bg-transparent">
                            <strong>Multa:</strong> $@contrato.Multa
                        </li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Lista de pagos -->
        <div class="col-md-7 mb-4">
            <div class="card h-100">
                <div class="card-body">
                    <h3 class="card-title text-center text-info mb-4">Lista de Pagos</h3>
                    <div style="max-height: 300px; overflow-y: auto;">
                        <table class="table table-striped table-hover align-middle">
                            <thead class="table-dark">
                                <tr>
                                    <th></th>
                                    <th>Vencimiento</th>
                                    <th>Importe</th>
                                    <th>Estado</th>
                                </tr>
                            </thead>
                            <tbody>
                                @foreach (var pago in pagos)
                                {
                                    <tr>
                                        <td>@pago.Numero_Pago</td>
                                        <td>@pago.Fecha_Vencimiento.ToString("dd/MM/yyyy")</td>
                                        <td>$@pago.Importe</td>
                                        <td>
                                            <span
                                                class="badge @(pago.Estado == "pendiente" ? "bg-warning text-dark" : pago.Estado == "pagado" ? "bg-success" : "bg-secondary")">
                                                @pago.Estado
                                            </span>
                                        </td>
                                    </tr>
                                }
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- BotÃ³n Dar de Baja -->
    <div class="text-center mt-4">
        <form asp-action="DarDeBaja" asp-route-id="@contrato.Id_Contrato" method="post">
            <button type="submit" class="btn btn-outline-danger btn-lg px-5">DAR DE BAJA</button>
        </form>
    </div>
</div>